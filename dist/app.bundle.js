var EntryPoint=function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);var i,n=Object.assign({},console,{log:function(){},table:function(){}});function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),t}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t){return t===i.HORIZONTAL?i.VERTICAL:i.HORIZONTAL}!function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL",t[t.BOTH=2]="BOTH",t[t.NONE=3]="NONE"}(i||(i={}));var s=function(){function t(e,r,i){o(this,t),u(this,"wordId",void 0),u(this,"letter",void 0),u(this,"direction",void 0),u(this,"originalDirection",void 0),this.letter=e,this.wordId="number"==typeof i?[i]:i,this.direction=r,this.originalDirection=r}return a(t,null,[{key:"emptyCell",value:function(){return new this("",i.NONE,-1)}}]),t}(),h=function(){function t(){o(this,t),u(this,"grid",void 0),this.grid=[[]]}return a(t,[{key:"inBound",value:function(t,e){return 0<=t&&t<this.height&&0<=e&&e<this.width}},{key:"getCell",value:function(t,e){return this.inBound(t,e)?this.grid[t][e]:s.emptyCell()}},{key:"setCell",value:function(t,e,r){if(!this.inBound(e,r))throw n.table(this.grid.map(function(t){return t.map(function(t){return JSON.stringify(t)})})),new Error("Cell is out of bounds (row=".concat(e,", col=").concat(r,", cell=").concat(JSON.stringify(t)));""===this.grid[e][r].letter?this.grid[e][r]=t:(this.grid[e][r].wordId.push(t.wordId[0]),this.grid[e][r].direction=i.BOTH)}},{key:"addEmptyRows",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=0;r<t;r++){var i=this.width;e?this.grid.unshift([]):this.grid.push([]);for(var n=0;n<i;n++){var o=0;e||(o=this.height-1),this.grid[o].push(s.emptyCell())}}}},{key:"addEmptyColumns",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=0;r<t;r++){var i=!0,n=!1,o=void 0;try{for(var l,a=this.grid[Symbol.iterator]();!(i=(l=a.next()).done);i=!0){var u=l.value;e?u.unshift(s.emptyCell()):u.push(s.emptyCell())}}catch(t){n=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(n)throw o}}}}},{key:"addWord",value:function(t,e,r,o,l){e<0&&(this.addEmptyRows(-e,!0),e=0),r<0&&(this.addEmptyColumns(-r,!0),r=0);var a=e,u=r;if(o===i.HORIZONTAL?u+=t.length-1:a+=t.length-1,n.log('Word is "'.concat(t,'" (len=').concat(t.length,"), row = ").concat(e,", col = ").concat(r)),a>=this.height){var d=a-this.height+1;n.log("endRow = ".concat(a,", this.height = ").concat(this.height,", adding ").concat(d," rows.")),this.addEmptyRows(d,!1)}if(u>=this.width){var h=u-this.width+1;n.log("endCol = ".concat(u,", this.width = ").concat(this.width,", adding ").concat(h," cols.")),this.addEmptyColumns(h,!1)}var c=!0,f=!1,g=void 0;try{for(var v,y=t[Symbol.iterator]();!(c=(v=y.next()).done);c=!0){var O=v.value,m=new s(O,o,l);this.setCell(m,e,r),o===i.HORIZONTAL?r++:e++}}catch(t){f=!0,g=t}finally{try{c||null==y.return||y.return()}finally{if(f)throw g}}}},{key:"removeWord",value:function(t){for(var e=0;e<this.grid.length;e++)for(var r=0;r<this.grid[e].length;r++){var i=this.grid[e][r].wordId.indexOf(t);i>-1&&this.grid[e][r].wordId.splice(i,1),1===this.grid[e][r].wordId.length&&(this.grid[e][r].direction=this.grid[e][r].originalDirection),0===this.grid[e][r].wordId.length&&(this.grid[e][r]=s.emptyCell())}this.trimGrid()}},{key:"getGrid",value:function(){return this.grid}},{key:"trimGrid",value:function(){for(;!this.grid[0].some(function(t){return""!==t.letter});)this.grid.shift();for(;!this.grid[this.height-1].some(function(t){return""!==t.letter});)this.grid.pop();for(;!this.grid.some(function(t){return""!==t[0].letter});)this.grid.forEach(function(t){return t.shift()});for(;!this.grid.some(function(t){return""!==t[t.length-1].letter});)this.grid.forEach(function(t){return t.pop()})}},{key:"forEachCell",value:function(t){for(var e=0;e<this.grid.length;e++)for(var r=0;r<this.grid[e].length;r++){t(this.grid[e][r],e,r)}}},{key:"transpose",value:function(){var t=this;this.grid=this.grid[0].map(function(e,r){return t.grid.map(function(t){return t[r]})})}},{key:"height",get:function(){return this.grid.length}},{key:"width",get:function(){return this.grid[0].length}},{key:"area",get:function(){return this.width*this.height}}]),t}();function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t){for(var e,r,i=t.length;0!==i;)r=Math.floor(Math.random()*i),e=t[i-=1],t[i]=t[r],t[r]=e;return t}var g=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};function v(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function y(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function O(t,e){return Math.abs(.5-t/e)}c(g,"latin_map",{"Á":"A","Ă":"A","Ắ":"A","Ặ":"A","Ằ":"A","Ẳ":"A","Ẵ":"A","Ǎ":"A","Â":"A","Ấ":"A","Ậ":"A","Ầ":"A","Ẩ":"A","Ẫ":"A","Ä":"A","Ǟ":"A","Ȧ":"A","Ǡ":"A","Ạ":"A","Ȁ":"A","À":"A","Ả":"A","Ȃ":"A","Ā":"A","Ą":"A","Å":"A","Ǻ":"A","Ḁ":"A","Ⱥ":"A","Ã":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ḃ":"B","Ḅ":"B","Ɓ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ć":"C","Č":"C","Ç":"C","Ḉ":"C","Ĉ":"C","Ċ":"C","Ƈ":"C","Ȼ":"C","Ď":"D","Ḑ":"D","Ḓ":"D","Ḋ":"D","Ḍ":"D","Ɗ":"D","Ḏ":"D","ǲ":"D","ǅ":"D","Đ":"D","Ƌ":"D","Ǳ":"DZ","Ǆ":"DZ","É":"E","Ĕ":"E","Ě":"E","Ȩ":"E","Ḝ":"E","Ê":"E","Ế":"E","Ệ":"E","Ề":"E","Ể":"E","Ễ":"E","Ḙ":"E","Ë":"E","Ė":"E","Ẹ":"E","Ȅ":"E","È":"E","Ẻ":"E","Ȇ":"E","Ē":"E","Ḗ":"E","Ḕ":"E","Ę":"E","Ɇ":"E","Ẽ":"E","Ḛ":"E","Ꝫ":"ET","Ḟ":"F","Ƒ":"F","Ǵ":"G","Ğ":"G","Ǧ":"G","Ģ":"G","Ĝ":"G","Ġ":"G","Ɠ":"G","Ḡ":"G","Ǥ":"G","Ḫ":"H","Ȟ":"H","Ḩ":"H","Ĥ":"H","Ⱨ":"H","Ḧ":"H","Ḣ":"H","Ḥ":"H","Ħ":"H","Í":"I","Ĭ":"I","Ǐ":"I","Î":"I","Ï":"I","Ḯ":"I","İ":"I","Ị":"I","Ȉ":"I","Ì":"I","Ỉ":"I","Ȋ":"I","Ī":"I","Į":"I","Ɨ":"I","Ĩ":"I","Ḭ":"I","Ꝺ":"D","Ꝼ":"F","Ᵹ":"G","Ꞃ":"R","Ꞅ":"S","Ꞇ":"T","Ꝭ":"IS","Ĵ":"J","Ɉ":"J","Ḱ":"K","Ǩ":"K","Ķ":"K","Ⱪ":"K","Ꝃ":"K","Ḳ":"K","Ƙ":"K","Ḵ":"K","Ꝁ":"K","Ꝅ":"K","Ĺ":"L","Ƚ":"L","Ľ":"L","Ļ":"L","Ḽ":"L","Ḷ":"L","Ḹ":"L","Ⱡ":"L","Ꝉ":"L","Ḻ":"L","Ŀ":"L","Ɫ":"L","ǈ":"L","Ł":"L","Ǉ":"LJ","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ń":"N","Ň":"N","Ņ":"N","Ṋ":"N","Ṅ":"N","Ṇ":"N","Ǹ":"N","Ɲ":"N","Ṉ":"N","Ƞ":"N","ǋ":"N","Ñ":"N","Ǌ":"NJ","Ó":"O","Ŏ":"O","Ǒ":"O","Ô":"O","Ố":"O","Ộ":"O","Ồ":"O","Ổ":"O","Ỗ":"O","Ö":"O","Ȫ":"O","Ȯ":"O","Ȱ":"O","Ọ":"O","Ő":"O","Ȍ":"O","Ò":"O","Ỏ":"O","Ơ":"O","Ớ":"O","Ợ":"O","Ờ":"O","Ở":"O","Ỡ":"O","Ȏ":"O","Ꝋ":"O","Ꝍ":"O","Ō":"O","Ṓ":"O","Ṑ":"O","Ɵ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Õ":"O","Ṍ":"O","Ṏ":"O","Ȭ":"O","Ƣ":"OI","Ꝏ":"OO","Ɛ":"E","Ɔ":"O","Ȣ":"OU","Ṕ":"P","Ṗ":"P","Ꝓ":"P","Ƥ":"P","Ꝕ":"P","Ᵽ":"P","Ꝑ":"P","Ꝙ":"Q","Ꝗ":"Q","Ŕ":"R","Ř":"R","Ŗ":"R","Ṙ":"R","Ṛ":"R","Ṝ":"R","Ȑ":"R","Ȓ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꜿ":"C","Ǝ":"E","Ś":"S","Ṥ":"S","Š":"S","Ṧ":"S","Ş":"S","Ŝ":"S","Ș":"S","Ṡ":"S","Ṣ":"S","Ṩ":"S","Ť":"T","Ţ":"T","Ṱ":"T","Ț":"T","Ⱦ":"T","Ṫ":"T","Ṭ":"T","Ƭ":"T","Ṯ":"T","Ʈ":"T","Ŧ":"T","Ɐ":"A","Ꞁ":"L","Ɯ":"M","Ʌ":"V","Ꜩ":"TZ","Ú":"U","Ŭ":"U","Ǔ":"U","Û":"U","Ṷ":"U","Ü":"U","Ǘ":"U","Ǚ":"U","Ǜ":"U","Ǖ":"U","Ṳ":"U","Ụ":"U","Ű":"U","Ȕ":"U","Ù":"U","Ủ":"U","Ư":"U","Ứ":"U","Ự":"U","Ừ":"U","Ử":"U","Ữ":"U","Ȗ":"U","Ū":"U","Ṻ":"U","Ų":"U","Ů":"U","Ũ":"U","Ṹ":"U","Ṵ":"U","Ꝟ":"V","Ṿ":"V","Ʋ":"V","Ṽ":"V","Ꝡ":"VY","Ẃ":"W","Ŵ":"W","Ẅ":"W","Ẇ":"W","Ẉ":"W","Ẁ":"W","Ⱳ":"W","Ẍ":"X","Ẋ":"X","Ý":"Y","Ŷ":"Y","Ÿ":"Y","Ẏ":"Y","Ỵ":"Y","Ỳ":"Y","Ƴ":"Y","Ỷ":"Y","Ỿ":"Y","Ȳ":"Y","Ɏ":"Y","Ỹ":"Y","Ź":"Z","Ž":"Z","Ẑ":"Z","Ⱬ":"Z","Ż":"Z","Ẓ":"Z","Ȥ":"Z","Ẕ":"Z","Ƶ":"Z","Ĳ":"IJ","Œ":"OE","ᴀ":"A","ᴁ":"AE","ʙ":"B","ᴃ":"B","ᴄ":"C","ᴅ":"D","ᴇ":"E","ꜰ":"F","ɢ":"G","ʛ":"G","ʜ":"H","ɪ":"I","ʁ":"R","ᴊ":"J","ᴋ":"K","ʟ":"L","ᴌ":"L","ᴍ":"M","ɴ":"N","ᴏ":"O","ɶ":"OE","ᴐ":"O","ᴕ":"OU","ᴘ":"P","ʀ":"R","ᴎ":"N","ᴙ":"R","ꜱ":"S","ᴛ":"T","ⱻ":"E","ᴚ":"R","ᴜ":"U","ᴠ":"V","ᴡ":"W","ʏ":"Y","ᴢ":"Z","á":"a","ă":"a","ắ":"a","ặ":"a","ằ":"a","ẳ":"a","ẵ":"a","ǎ":"a","â":"a","ấ":"a","ậ":"a","ầ":"a","ẩ":"a","ẫ":"a","ä":"a","ǟ":"a","ȧ":"a","ǡ":"a","ạ":"a","ȁ":"a","à":"a","ả":"a","ȃ":"a","ā":"a","ą":"a","ᶏ":"a","ẚ":"a","å":"a","ǻ":"a","ḁ":"a","ⱥ":"a","ã":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ḃ":"b","ḅ":"b","ɓ":"b","ḇ":"b","ᵬ":"b","ᶀ":"b","ƀ":"b","ƃ":"b","ɵ":"o","ć":"c","č":"c","ç":"c","ḉ":"c","ĉ":"c","ɕ":"c","ċ":"c","ƈ":"c","ȼ":"c","ď":"d","ḑ":"d","ḓ":"d","ȡ":"d","ḋ":"d","ḍ":"d","ɗ":"d","ᶑ":"d","ḏ":"d","ᵭ":"d","ᶁ":"d","đ":"d","ɖ":"d","ƌ":"d","ı":"i","ȷ":"j","ɟ":"j","ʄ":"j","ǳ":"dz","ǆ":"dz","é":"e","ĕ":"e","ě":"e","ȩ":"e","ḝ":"e","ê":"e","ế":"e","ệ":"e","ề":"e","ể":"e","ễ":"e","ḙ":"e","ë":"e","ė":"e","ẹ":"e","ȅ":"e","è":"e","ẻ":"e","ȇ":"e","ē":"e","ḗ":"e","ḕ":"e","ⱸ":"e","ę":"e","ᶒ":"e","ɇ":"e","ẽ":"e","ḛ":"e","ꝫ":"et","ḟ":"f","ƒ":"f","ᵮ":"f","ᶂ":"f","ǵ":"g","ğ":"g","ǧ":"g","ģ":"g","ĝ":"g","ġ":"g","ɠ":"g","ḡ":"g","ᶃ":"g","ǥ":"g","ḫ":"h","ȟ":"h","ḩ":"h","ĥ":"h","ⱨ":"h","ḧ":"h","ḣ":"h","ḥ":"h","ɦ":"h","ẖ":"h","ħ":"h","ƕ":"hv","í":"i","ĭ":"i","ǐ":"i","î":"i","ï":"i","ḯ":"i","ị":"i","ȉ":"i","ì":"i","ỉ":"i","ȋ":"i","ī":"i","į":"i","ᶖ":"i","ɨ":"i","ĩ":"i","ḭ":"i","ꝺ":"d","ꝼ":"f","ᵹ":"g","ꞃ":"r","ꞅ":"s","ꞇ":"t","ꝭ":"is","ǰ":"j","ĵ":"j","ʝ":"j","ɉ":"j","ḱ":"k","ǩ":"k","ķ":"k","ⱪ":"k","ꝃ":"k","ḳ":"k","ƙ":"k","ḵ":"k","ᶄ":"k","ꝁ":"k","ꝅ":"k","ĺ":"l","ƚ":"l","ɬ":"l","ľ":"l","ļ":"l","ḽ":"l","ȴ":"l","ḷ":"l","ḹ":"l","ⱡ":"l","ꝉ":"l","ḻ":"l","ŀ":"l","ɫ":"l","ᶅ":"l","ɭ":"l","ł":"l","ǉ":"lj","ſ":"s","ẜ":"s","ẛ":"s","ẝ":"s","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ᵯ":"m","ᶆ":"m","ń":"n","ň":"n","ņ":"n","ṋ":"n","ȵ":"n","ṅ":"n","ṇ":"n","ǹ":"n","ɲ":"n","ṉ":"n","ƞ":"n","ᵰ":"n","ᶇ":"n","ɳ":"n","ñ":"n","ǌ":"nj","ó":"o","ŏ":"o","ǒ":"o","ô":"o","ố":"o","ộ":"o","ồ":"o","ổ":"o","ỗ":"o","ö":"o","ȫ":"o","ȯ":"o","ȱ":"o","ọ":"o","ő":"o","ȍ":"o","ò":"o","ỏ":"o","ơ":"o","ớ":"o","ợ":"o","ờ":"o","ở":"o","ỡ":"o","ȏ":"o","ꝋ":"o","ꝍ":"o","ⱺ":"o","ō":"o","ṓ":"o","ṑ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","õ":"o","ṍ":"o","ṏ":"o","ȭ":"o","ƣ":"oi","ꝏ":"oo","ɛ":"e","ᶓ":"e","ɔ":"o","ᶗ":"o","ȣ":"ou","ṕ":"p","ṗ":"p","ꝓ":"p","ƥ":"p","ᵱ":"p","ᶈ":"p","ꝕ":"p","ᵽ":"p","ꝑ":"p","ꝙ":"q","ʠ":"q","ɋ":"q","ꝗ":"q","ŕ":"r","ř":"r","ŗ":"r","ṙ":"r","ṛ":"r","ṝ":"r","ȑ":"r","ɾ":"r","ᵳ":"r","ȓ":"r","ṟ":"r","ɼ":"r","ᵲ":"r","ᶉ":"r","ɍ":"r","ɽ":"r","ↄ":"c","ꜿ":"c","ɘ":"e","ɿ":"r","ś":"s","ṥ":"s","š":"s","ṧ":"s","ş":"s","ŝ":"s","ș":"s","ṡ":"s","ṣ":"s","ṩ":"s","ʂ":"s","ᵴ":"s","ᶊ":"s","ȿ":"s","ɡ":"g","ᴑ":"o","ᴓ":"o","ᴝ":"u","ť":"t","ţ":"t","ṱ":"t","ț":"t","ȶ":"t","ẗ":"t","ⱦ":"t","ṫ":"t","ṭ":"t","ƭ":"t","ṯ":"t","ᵵ":"t","ƫ":"t","ʈ":"t","ŧ":"t","ᵺ":"th","ɐ":"a","ᴂ":"ae","ǝ":"e","ᵷ":"g","ɥ":"h","ʮ":"h","ʯ":"h","ᴉ":"i","ʞ":"k","ꞁ":"l","ɯ":"m","ɰ":"m","ᴔ":"oe","ɹ":"r","ɻ":"r","ɺ":"r","ⱹ":"r","ʇ":"t","ʌ":"v","ʍ":"w","ʎ":"y","ꜩ":"tz","ú":"u","ŭ":"u","ǔ":"u","û":"u","ṷ":"u","ü":"u","ǘ":"u","ǚ":"u","ǜ":"u","ǖ":"u","ṳ":"u","ụ":"u","ű":"u","ȕ":"u","ù":"u","ủ":"u","ư":"u","ứ":"u","ự":"u","ừ":"u","ử":"u","ữ":"u","ȗ":"u","ū":"u","ṻ":"u","ų":"u","ᶙ":"u","ů":"u","ũ":"u","ṹ":"u","ṵ":"u","ᵫ":"ue","ꝸ":"um","ⱴ":"v","ꝟ":"v","ṿ":"v","ʋ":"v","ᶌ":"v","ⱱ":"v","ṽ":"v","ꝡ":"vy","ẃ":"w","ŵ":"w","ẅ":"w","ẇ":"w","ẉ":"w","ẁ":"w","ⱳ":"w","ẘ":"w","ẍ":"x","ẋ":"x","ᶍ":"x","ý":"y","ŷ":"y","ÿ":"y","ẏ":"y","ỵ":"y","ỳ":"y","ƴ":"y","ỷ":"y","ỿ":"y","ȳ":"y","ẙ":"y","ɏ":"y","ỹ":"y","ź":"z","ž":"z","ẑ":"z","ʑ":"z","ⱬ":"z","ż":"z","ẓ":"z","ȥ":"z","ẕ":"z","ᵶ":"z","ᶎ":"z","ʐ":"z","ƶ":"z","ɀ":"z","ﬀ":"ff","ﬃ":"ffi","ﬄ":"ffl","ﬁ":"fi","ﬂ":"fl","ĳ":"ij","œ":"oe","ﬆ":"st","ₐ":"a","ₑ":"e","ᵢ":"i","ⱼ":"j","ₒ":"o","ᵣ":"r","ᵤ":"u","ᵥ":"v","ₓ":"x"}),c(g,"latinize",function(t){return t.replace(/[^A-Za-z0-9\[\] ]/g,function(t){return g.latin_map[t]||t})});var m,p,w,E=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.25;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,"grid",void 0),y(this,"nextId",void 0),y(this,"lonelyWords",void 0),y(this,"words",void 0),y(this,"attempts",void 0),y(this,"minimumRatio",void 0),this.words=[],this.grid=new h,this.nextId=0,this.lonelyWords=0,this.attempts=e,this.minimumRatio=r}var e,r,o;return e=t,(r=[{key:"getGrid",value:function(){return this.grid}},{key:"addWord",value:function(t){this.words.push(t)}},{key:"clear",value:function(){this.grid=new h,this.nextId=0,this.lonelyWords=0}},{key:"_generate",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?f(this.words):this.words.sort(function(t,e){return e.length-t.length});var t=!0,e=!1,r=void 0;try{for(var i,o=this.words[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var l=i.value,a=this.getWordCoordinates(l);this.grid.addWord(l,a.row,a.col,a.direction,this.nextId),this.nextId++,n.table(this.grid.getGrid().map(function(t){return t.map(function(t){return t.letter})}))}}catch(t){e=!0,r=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw r}}}},{key:"generate",value:function(){for(var t,e,r=0;r<this.attempts||void 0!==e&&e<this.minimumRatio&&r<2*this.attempts;r++){this.clear(),this._generate(r<this.attempts/2);var i=O(this.grid.height,this.grid.width),o=O(this.grid.width,this.grid.height);o<i&&(this.grid.transpose(),i=o),n.log("Grid Ratio:",i,"- lonely words:",this.lonelyWords),(void 0===t||void 0===e||this.lonelyWords<t.lonelyWords||this.lonelyWords===t.lonelyWords&&i<=e&&this.grid.area<t.grid.area)&&(e=i,t=Object.assign({},this))}Object.assign(this,t),console.log("Best ratio:",e,"- best lonely words:",this.lonelyWords)}},{key:"getWordCoordinates",value:function(t){var e=this;if(0===this.grid.width)return{row:0,col:0,direction:i.HORIZONTAL};var r=[];return this.grid.forEachCell(function(e,n,o){var l=function(t,e){for(var r=[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i<t.length;i++)t[i]===e&&r.push(i);return r}(t,e.letter),a=!0,u=!1,s=void 0;try{for(var h,c=l[Symbol.iterator]();!(a=(h=c.next()).done);a=!0){var f=h.value;if(f>=0){var g=d(e.direction),v={row:n,col:o,direction:g};g===i.VERTICAL?v.row-=f:v.col-=f,r.push(v)}}}catch(t){u=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(u)throw s}}}),n.log("Possible positions:",r),0===(r=r.filter(function(r){var n=r.row,o=r.col,l=r.direction;if(l===i.HORIZONTAL&&""!==e.grid.getCell(n,o-1).letter||l===i.VERTICAL&&""!==e.grid.getCell(n-1,o).letter)return!1;var a=!0,u=!1,s=void 0;try{for(var h,c=t[Symbol.iterator]();!(a=(h=c.next()).done);a=!0){var f=h.value,g=e.grid.getCell(n,o);if(""!==g.letter&&g.letter!==f||g.direction===l||l===i.VERTICAL&&([l,i.BOTH].indexOf(e.grid.getCell(n,o-1).direction)>-1||[l,i.BOTH].indexOf(e.grid.getCell(n,o+1).direction)>-1||[d(l),i.BOTH].indexOf(e.grid.getCell(n,o-1).direction)>-1&&""===g.letter)||l===i.HORIZONTAL&&([l,i.BOTH].indexOf(e.grid.getCell(n-1,o).direction)>-1||[l,i.BOTH].indexOf(e.grid.getCell(n+1,o).direction)>-1||[d(l),i.BOTH].indexOf(e.grid.getCell(n-1,o).direction)>-1&&""===g.letter))return!1;l===i.HORIZONTAL?o++:n++}}catch(t){u=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(u)throw s}}return""===e.grid.getCell(n,o).letter})).length?(this.lonelyWords++,{row:this.grid.height+1,col:0,direction:i.HORIZONTAL}):r[Math.floor(Math.random()*r.length)]}}])&&v(e.prototype,r),o&&v(e,o),t}();function b(){if(null===m||null===p)throw new Error("Table or input is null.");var t;t=p.value,t=g.latinize(t).toUpperCase().replace(/ /g,""),w.addWord(t),console.time("Time to generate"),w.generate(),console.timeEnd("Time to generate"),console.log(w.getGrid().getGrid().map(function(t){return t.map(function(t){return t.letter})})),function(){if(null===m)throw new Error("Table is null.");m.innerHTML="";var t,e,r,i=document.createElement("tbody"),n={};(t=0,e=16,r=function(t,e){for(var r=[],i=t;i<e;i++)r.push(i);return r}(t,e),f(r),r).forEach(function(t,e){n[e]=t}),w.getGrid().getGrid().map(function(t){return t.map(function(t){return{letter:t.letter,wordNumber:n[t.wordId[0]%16]}})}).forEach(function(t){var e=document.createElement("tr");t.forEach(function(t){var r=document.createElement("td");r.innerHTML='<span class="word'.concat(t.wordNumber,'">').concat(t.letter||"&nbsp;","</span>"),e.appendChild(r)}),i.appendChild(e)}),m.appendChild(i)}(),p.value=""}document.addEventListener("DOMContentLoaded",function(){m=document.getElementById("crossword");var t=document.getElementById("wordForm");if(p=document.getElementById("wordInput"),null===m||null===t||null===p)throw new Error("Table or form or input is null.");t.onsubmit=b,w=new E(20)})}]);